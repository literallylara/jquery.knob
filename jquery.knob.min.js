/*! jquery.knob v0.0.2
 * 
 * Copyright (c) 2016 @literallylara
 * Under the MIT license:
 * http://www.opensource.org/licenses/mit-license.php
 */
;(function(c){"function"==typeof define&&define.amd?define(["jquery"],c):"undefined"!==typeof module&&module.exports?module.exports=c:c(window.jQuery||window.$)})(function(c){c.widget("custom.knob",{options:{bgColor:"#000",fgColor:"#fff",type:"vol",tooltip:!0,turnWith:null,arc:360,steps:100,offset:0,range:"auto",invertRange:!1,fineTuneFactor:10,value:0,resetValue:0,classPrefix:"knob"},_$svg:null,_$stroke:null,_$tooltip:null,_value:null,_grabValue:null,_grabOffset:null,_rangeFine:null,_shiftKey:null,
_pageY:null,_create:function(){var a=this,b=this.options;Object.keys(b).forEach(function(c){var d=a.element.attr("data-"+c);b[c]=void 0!==d?d:b[c]});this._$svg=c('\n\t\t\t<svg class="'+b.classPrefix+'-svg" viewBox="0 0 2 2">\n\t\t\t\t<circle class="'+b.classPrefix+'-stroke" cx="1" cy="1" r="1" clip-path="url(#knob-clip'+this.uuid+')" />\n\t\t\t\t<clipPath id="knob-clip'+this.uuid+'"><circle cx="1" cy="1" r="1" /></clipPath>\n\t\t\t</svg>').appendTo(this.element);this._$stroke=this._$svg.find("circle:eq(0)").css({fill:b.bgColor,
stroke:b.fgColor,strokeWidth:"20%",transformOrigin:"50% 50%"});this._$knob=c('<div class="'+b.classPrefix+'-knob"></div>').css({position:"absolute",top:"50%",left:"50%",zIndex:0,height:"70%",width:"70%",transform:"translate(-50%,-50%)",backgroundColor:b.fgColor,borderRadius:"100%",overflow:"hidden"}).appendTo(this.element);this._$pointerContainer=c('<div class="'+b.classPrefix+'-pointer-container"></div>').css({position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",transformOrigin:"50% 50%",
zIndex:1}).appendTo(this._$knob);this._$pointer=c('<span class="'+b.classPrefix+'-pointer"></span>').css({position:"absolute",top:"7.5%",left:"50%",height:"15%",width:"7%",transform:"translate(-50%,0%)",backgroundColor:b.bgColor,borderRadius:"2em"}).appendTo(this._$pointerContainer);this._$tooltip=c('<span class="'+b.classPrefix+'-tooltip"></span>').css({position:"absolute",display:"none",zIndex:999,color:"#fff",fontFamily:"monospace",padding:".25em .5em",borderRadius:"3px",transform:"translate(-50%,-50%)",
pointerEvents:"none",backgroundColor:"rgba(0,0,0,.5)"}).appendTo(this.element);b.range="auto"==b.range?this.element.outerHeight()/2:b.range;this._rangeFine=b.range*b.fineTuneFactor;this._setValue(b.value);this.element.css("position","relative");this.element.on("mousedown.knob",this._grab.bind(this));this.element.on("dblclick.knob",this._reset.bind(this))},_clamp:function(a,b,c){return Math.min(Math.max(a,b),c)},_setValue:function(a){var b="vol"==this.options.type;a=this._clamp(a,b?0:-1,1);var d=this.options.arc/
180*Math.PI/2,e=this.options.offset-(b?this.options.arc/2:0),d=b?d*a*2:d*a;this._$stroke.css({strokeDasharray:Math.abs(d)+" "+2*Math.PI,transform:"rotate("+(90+e)+"deg) scale(-1,"+(0<a||b?-1:1)+")"});this._$pointerContainer.css({transform:"rotate("+(d/Math.PI*180+e)+"deg)"});this.options.turnWith&&c(this.options.turnWith).css({transform:"rotate("+(d/Math.PI*180+e)+"deg)"});this._value=a;this.element.trigger("turn",this._value)},_grab:function(a){this._grabValue=this._value;this._grabOffset=a.pageY;
this.element.trigger("grab",this._value);c(document).on("mouseup.knob",this._release.bind(this));c(document).on("mousemove.knob",this._turn.bind(this));c(document).on("keyup.knob",this._toggleFineTuning.bind(this));c(document).on("keydown.knob",this._toggleFineTuning.bind(this));this.element.addClass("grab");this.options.tooltip&&this._updateTooltip(a)},_toggleFineTuning:function(a){a.keyCode&&this._shiftKey!=a.shiftKey&&(this._grabOffset=this._pageY,this._grabValue=this._value);this._shiftKey=a.shiftKey},
_turn:function(a){a.preventDefault();this._setValue(Math.floor((this._grabValue+(this._grabOffset-a.pageY)/(a.shiftKey?this._rangeFine:this.options.range)*(this.options.invertRange?-1:1))*this.options.steps)/this.options.steps);this._pageY=a.pageY;this.options.tooltip&&this._updateTooltip(a)},_release:function(a){c(document).off("mouseup.knob mousemove.knob keyup.knob keydown.knob");this.element.trigger("release",this._value);this.element.removeClass("grab");this.options.tooltip&&this._$tooltip.hide()},
_updateTooltip:function(a){var b="follow"==this.options.tooltip;this._$tooltip.css({top:b?a.pageY-this.element.offset().top:"50%",left:b?a.pageX-this.element.offset().left+40:"50%"}).text(Math.round(100*this._value)).show()},_reset:function(a){this._setValue(this.options.resetValue);this.element.trigger("reset",this.options.resetValue)},_destroy:function(a){this.element.off("mousedown.knob");this.element.removeClass(this.options.classPrefix+this.uuid);this.element.find("."+this.options.classPrefix+
"-style").remove();this.element.find("."+this.options.classPrefix+"-svg").remove();this.element.find("."+this.options.classPrefix+"-knob").remove();this.element.find("."+this.options.classPrefix+"-tooltip").remove()},value:function(a){if(a)this._setValue(a);else return this._value}})});